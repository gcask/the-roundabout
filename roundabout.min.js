function showPlayer(e){return State.isHighlighted(e)?m("mark",e):e}let State={teams:[],ones:[],twos:[],highlighted:"(none)",load:function(e){return m.request({method:"GET",url:e}).then(function(e){State.teams=e.teams,State.ones=e.ones,State.twos=e.twos})},isHighlighted:e=>State.highlighted==e,highlight:function(e){State.highlighted=e}};const Team={view:function(e){return m(".card.team",[m(".card-header",m("h2.card-title",showPlayer(e.attrs.members[0]))),m("ul.card-body",e.attrs.members.slice(1).map(e=>m("li",showPlayer(e)))),m(".card-footer")])}},Teams={view:function(e){return m(".columns",State.teams.map(e=>m(".column.col-lg-3.col-md-6.col-sm-12",m(Team,e))))}},Threes={view:function(e){const t=State.teams.slice(1),a=State.teams.slice(0,-1);return m(".columns",[m(".column",[m("table.table",[m("caption",m("h2","First Bo3")),m("thead.text-center",m("tr",[m("th"),a.map(e=>m("th",showPlayer(e.members[0])))])),m("tbody",t.map((e,t)=>m("tr",[m("th",showPlayer(e.members[0])),a.map((e,a)=>m("td",{class:t<a?"bg-gray":""}))])))])])])}},Twos={view:function(e){const t=[[0,1],[0,2],[1,2]],a=State.teams.slice(1),n=State.teams.slice(0,-1);return m(".columns",[m(".column.col-12",[m("table.table.table-scroll",[m("caption",m("h2","Round-robin Bo3")),m("thead.text-center",m("tr",[m("th",{colspan:2}),n.map(e=>m("th",{colspan:3},["Team ",showPlayer(e.members[0])]))]),m("tr",[m("th",{colspan:2}),n.map(e=>t.map(t=>m("th",[showPlayer(e.members[t[0]])," ",showPlayer(e.members[t[1]])])))])),a.map((e,a)=>m("tbody",t.map((s,r)=>{let o=[];const l=e.members[s[0]],i=e.members[s[1]];return 0==r&&o.push(m("th",{rowspan:3},["Team ",showPlayer(l)])),o.push(m("th",[showPlayer(l)," ",showPlayer(i)])),o.push(...n.map((e,n)=>t.map(t=>{const s=e.members[t[0]],r=e.members[t[1]];let o=void 0,c=-1,h=-1;const u=()=>a<n?{class:"bg-gray"}:[l,i,s,r].some(State.isHighlighted)?{class:"bg-secondary text-center"}:{class:"text-center"};if(a>=n){const e=[l,i,s,r];o=State.twos.find(t=>t.pairs.flat().every(t=>e.includes(t))),o&&(c=o.pairs.findIndex(e=>e.includes(l)),h=(c+1)%2)}return m("td",u(),o?o.score[c]+" - "+o.score[h]:"")}))),m("tr",o)})))])])])}},Ones={view:function(e){return m(".columns",[m(".column.col-12",[m("table.table.table-striped",[m("thead",[m("tr",[m("th"),State.ones.map((e,t)=>m("th.text-center",{colspan:2},"Round "+(t+1)))]),m("tr",[m("th","Player"),State.ones.map(()=>[m("th.text-center","Opponent"),m("th.text-center","Result")])])]),m("tbody",State.teams.map(e=>[e.members.map(e=>m("tr",State.isHighlighted(e)?{class:"bg-secondary"}:{},[m("td",showPlayer(e)),State.ones.map(t=>{const a=t.find(t=>t.players.includes(e)),n=a.players.indexOf(e),s=(n+1)%2;return[m("td.text-center",showPlayer(a.players[s])),m("td.text-center","score"in a?a.score[n]+" - "+a.score[s]:"")]})]))]))])])])}},App={oninit:function(e){State.load(e.attrs.dataUrl)},view:function(e){const t=function(e){return State.isHighlighted(e)?{value:e,selected:!0}:{value:e}},a=function(e){return{class:"btn-lg btn btn-"+(m.route.get()==e?"primary":"link"),href:e}};return[m("header.navbar",[m("section.navbar-section",[m("strong.navbar-brand.mr-2","The Roundabout"),m(m.route.Link,a("/teams"),"Teams")]),m("section.navbar-center",[m(m.route.Link,a("/3s"),"3v3"),m(m.route.Link,a("/2s"),"2v2"),m(m.route.Link,a("/1s"),"1v1")]),m("section.navbar-section",[m(".input-group.input-inline",[m("select.form-select",{onchange:function(e){State.highlight(e.target.value)}},[m("option",t("(none)"),"(no player highlighted)"),State.teams.map(e=>e.members.map(e=>m("option",t(e),e)))])])])]),m(".container",e.children)]}};